<%@page language="abap"%>                                                                                                                                                                                                                                      
var last_altitude = 0;                                                                                                                                                                                                                                         
function set_compass(deg)                                                                                                                                                                                                                                      
{                                                                                                                                                                                                                                                              
  $('#compasswheel').css('webkitTransform','rotateZ('+String(360-deg)+'deg)');                                                                                                                                                                                 
}                                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                               
function set_altimeter(altitude)                                                                                                                                                                                                                               
{                                                                                                                                                                                                                                                              
  var str = String(altitude);                                                                                                                                                                                                                                  
  var unit = 0;                                                                                                                                                                                                                                                
  var tens = 0;                                                                                                                                                                                                                                                
  var huns = 0;                                                                                                                                                                                                                                                
  var thou = 0;                                                                                                                                                                                                                                                
  var ttho = 0;                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                               
  if(str.length>0) unit = str.substr(str.length-1,1);                                                                                                                                                                                                          
  if(str.length>1) tens = str.substr(str.length-2,1);                                                                                                                                                                                                          
  if(str.length>2) huns = str.substr(str.length-3,1);                                                                                                                                                                                                          
  if(str.length>3) thou = str.substr(str.length-4,1);                                                                                                                                                                                                          
  if(str.length>4) ttho = str.substr(str.length-5,1);                                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
  //console.log("Altitude passed = "+ttho+thou+huns+tens+unit);                                                                                                                                                                                                
                                                                                                                                                                                                                                                               
  $("#altnum1").css("top",135-(unit*30)+"px");                                                                                                                                                                                                                 
  $("#altnum2").css("top",135-(tens*30)+"px");                                                                                                                                                                                                                 
  $("#altnum3").css("top",135-(huns*30)+"px");                                                                                                                                                                                                                 
  $("#altnum4").css("top",135-(thou*30)+"px");                                                                                                                                                                                                                 
  $("#altnum5").css("top",135-(ttho*30)+"px");                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                               
  $('#altimeterlittleneedle').css('webkitTransform','rotateZ('+Number((ttho+thou+huns+tens+unit)/100)*3.6+'deg)');                                                                                                                                             
  $('#altimeterbigneedle').css('webkitTransform','rotateZ('+Number((huns+tens)/10)*36+'deg)');                                                                                                                                                                 
                                                                                                                                                                                                                                                               
  var delta = (altitude-last_altitude)*60/1000;                                                                                                                                                                                                                
  if(altitude==0) delta = 0;                                                                                                                                                                                                                                   
  set_vertspeed(delta);                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                               
  last_altitude = altitude;                                                                                                                                                                                                                                    
}                                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                               
function set_pitch_angle(deg)                                                                                                                                                                                                                                  
{                                                                                                                                                                                                                                                              
  $("#horizongroundsky").css("-webkit-transform-origin","50% "+String(50-(Number(deg)/180*100))+"%"); /* Safari and Chrome */                                                                                                                                  
                                                                                                                                                                                                                                                               
  $("#horizongroundsky").css("top",-194+(deg*4)+"px");                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
}                                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                               
function set_roll_angle(deg)                                                                                                                                                                                                                                   
{                                                                                                                                                                                                                                                              
  var turncoord = Number(deg);                                                                                                                                                                                                                                 
  var rolldeg = Number(deg*-1);                                                                                                                                                                                                                                
  if(turncoord>12) turncoord=12;                                                                                                                                                                                                                               
  if(turncoord<-12) turncoord=-12;                                                                                                                                                                                                                             
  $('#horizongroundsky').css('webkitTransform','rotateZ('+rolldeg+'deg)');                                                                                                                                                                                     
  $('#turncoordaircraft').css('webkitTransform','rotateZ('+turncoord+'deg)');                                                                                                                                                                                  
  $('#turncoordball').css('webkitTransform','rotateZ('+turncoord+'deg)');                                                                                                                                                                                      
                                                                                                                                                                                                                                                               
}                                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                               
function set_airspeed(knots)                                                                                                                                                                                                                                   
{                                                                                                                                                                                                                                                              
  $('#airspeedneedle').css('webkitTransform','rotateZ('+String(knots*180/500+180)+'deg)');                                                                                                                                                                     
}                                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                               
function set_vertspeed(fpm)                                                                                                                                                                                                                                    
{                                                                                                                                                                                                                                                              
  var vertspeed = fpm;                                                                                                                                                                                                                                         
  if(vertspeed>6) vertspeed=6;                                                                                                                                                                                                                                 
  if(vertspeed<-6) vertspeed=-6;                                                                                                                                                                                                                               
  vertspeed = (vertspeed*25)-90;                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
  //console.log("Vertspeed="+fpm+" set to "+vertspeed);                                                                                                                                                                                                        
                                                                                                                                                                                                                                                               
  $('#vertspeedneedle').css('webkitTransform','rotateZ('+String(vertspeed)+'deg)');                                                                                                                                                                            
}                                                                                                                                                                                                                                                              